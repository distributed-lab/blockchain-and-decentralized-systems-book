# 1 ДЕЦЕНТРАЛИЗАЦИЯ В ИНФОРМАЦИОННЫХ СИСТЕМАХ

Централизованные системы и применяемые в них иерархические модели управления имеют ряд недостатков. Например, любая централизованная социальная сеть наподобие Facebook может цензурировать все действия пользователей и блокировать их аккаунты, если эти действия оказались «неправомерными». Естественно, решение о правомерности этих действий принимает единолично управляющая сторона.

Непрозрачность процессов, протекающих в централизованных информационных системах, не оставляет клиентам почти никакой возможности доказать нарушение приватности их важных (sensitive) данных. В финансовых системах эта же непрозрачность приводит к невозможности проверить то, соответствует ли итоговый баланс пользователя проведенным транзакциям.

Такое положение вещей (вернее, такие особенности традиционной архитектуры) позволяет владельцу системы модифицировать историю изменений на свое усмотрение, причем даже задним числом. Очевидно, что в таких системах принятие решений носит полностью субъективный характер.

## 1.1 Что такое децентрализация?

*Децентрализация* – противоположный к централизации процесс. Он предусматривает, что ответственность за поддержание функций определенной системы (хранения данных, вычисления, принятия решений и т. д.) распределяется между участниками системы. Это понятие применяется не только в пределах информационных технологий. Оно давно используется в областях общественной жизни, таких как политика, менеджмент, юриспруденция, экономика и т. д. 

В теории передачи данных под децентрализацией понимается создание условий, при которых отпадает необходимость в центральном сервере, а участники сети равноправны. Яркий пример децентрализации – Интернет: в этой глобальной сети маршрутизаторы работают независимо друг от друга. В таких условиях выход из строя одного из маршрутизаторов не является критическим для пользователей, так как в большинстве случаев существует более одного маршрута доставки пакета данных. Чем выше *уровень децентрализации* определенной системы, тем больше максимальное количество отказавших компонентов, которое она может выдержать.

*Децентрализованная система* состоит из множества независимых участников, которые совместно поддерживают ее функционирование. Отметим, что подобный подход требует от участников согласованных действий для достаточно эффективного функционирования системы без центральной стороны. Децентрализация как явление имеет множество преимуществ. Чтобы понять их, стоит рассмотреть базовые понятия и определения, а также обратиться к истории развития децентрализованных систем.

### Понятие децентрализация для информационных систем

Для начала следует разобраться, что представляет собой информационная система. Согласно стандарту ISO/IEC 2382:2015 [1] информационная система – это система, предназначенная для сбора, организации, хранения и обработки информации, и связанные с ней организационные ресурсы. Для функционирования информационной системы необходима база данных, а также технические средства с соответствующим программным обеспечением для доступа к этой базе данных и управления данными.

Можно выделить два главных признака, которые отличают децентрализованную систему от централизованной. Первый из них состоит в том, что все ее компоненты обязательно децентрализованные. «Ну и что?» – скажете вы. – «Допустим, централизованный сервис предусматривает, что копии базы данных хранятся параллельно у всех пользователей. Не делает же подобный подход систему децентрализованной?»

Правильно, но есть еще второй признак. Он заключается в том, что децентрализация «расщепляет» ядро системы. Все *процессы*, которые раньше были неделимыми: управление системой, управление пользователями, управление активами, коммуникация между участниками, принятие решений, хранение и обработка информации, аудит, – теперь может выполнять множество участников параллельно и независимо друг от друга.

### Отличие децентрализованных систем от систем с резервированием

Резервирование зачастую используется для повышения надежности определенной системы. Оно предусматривает добавление избыточных (резервных) компонентов в систему. Такой подход подразумевает, что при отказе одного из компонентов системы ее функционирование не прекратится, а просто произойдет переключение этого компонента на резервный. В качестве простых примеров резервирования можно привести дублирование некоторых органов у человека или наличие заместителей у руководящих должностей.

Исходя из вышеперечисленного, дадим определение системы с резервированием. *Система с резервированием  – это система с резервными составляющими, избыточными по отношению к минимально необходимому их количеству и выполняющими те же функции, что и основные элементы системы.*

Очевидно, децентрализация обязательно предполагает наличие резервирования, но резервирование не всегда предполагает децентрализацию. Дело в том, что резервирование может осуществляться и для централизованных систем. Для этого достаточно добавить резервных копий ключевых компонентов в систему (например дополнительную базу данных, воспроизводящую копию хранимых данных). В децентрализованной среде резервирование – это обязательное следствие того, что независимый набора компонентов есть у каждого участника определенной системы.

Исходя из определений системы с резервированием и децентрализованной системы, можно отметить два основных отличия между ними. Первое состоит в том, что компонентами децентрализованной системы, в отличие от компонентов системы с резервированием, не может управлять центральный орган. Второе – в том, что избыточность обязательна в децентрализованной системе. В системе с резервированием избыточность применяется только для улучшения определенных рабочих характеристик и не обязательна.

## 1.2 History of decentralized systems

Еще в 1970-х годах в поисках более надежного способа хранения цифровых данных люди обратили внимание на использование принципов децентрализации. Одним из первых был реализован проект под названием Usenet [2]. Основной принцип функционирования этого протокола состоял в обмене данными между серверами по специальному алгоритму, который дополнительно обеспечивал синхронизацию состояний узлов. Таким образом, каждый сервер представлял собой обновляющуюся локальную копию любого другого узла из сети. В случае отказа в работе одного из серверов, система продолжала свое функционирование, поскольку копии данных хранились на любом другом сервере. По сравнению с имеющимися на тот момент централизованными альтернативами, подход Usenet позволил повысить надежность хранения данных.

Идея, которая была реализована в протоколе Usenet дала представление о новом подходе к хранению и синхронизации данных, поэтому вполне закономерно, что позже она легла в основу дальнейших попыток реализовать надежный способ обмена данными в децентрализованной среде.

В это же время был предложен протокол передачи файлов – FTP (File Transfer Protocol) [3]. Он позволил пользователям независимо передавать файлы друг другу и дал толчок возникновению децентрализованных файлообменных сетей и протоколов обмена сообщениями, которые начали активно развиваться позже, в 1990-х гг. Среди них можно отметить Topsites, IRC, Napster и т. д.

В начале 1980-х мир увидел стек протоколов передачи данных TCP/IP [4], с которым появился привычный для нас сегодня Интернет. Это событие стало революцией в информационном мире, поскольку компьютеры получили возможность подключаться к глобальному цифровому пространству. Бизнес получал большие выгоды от перехода процессов в цифровую форму, и даже государства в большинстве своем поддерживали эту инновацию.

Интернет стал свободной сетью для распространения информации и примером для других сфер, которые стали применять принципы децентрализации в поиске и обработке данных. Сейчас мы называем их *open API* и *sharing economy* [5]. Их основная идея состоит в прямом взаимодействии пользователей друг с другом и в совместном использовании ресурса, услуги, контента, устройства и т. д. Далее мы рассмотрим как такие принципы нашли применение в учетных систем различных типов.

### Decentralized file-sharing systems

Децентрализованный подход к построению файлообменных систем и систем хранения данных предполагает, что различные фрагменты файлов хранят разные узлы сети (рис. 1.2).

![Рисунок 1.2 – Схема распределения фрагментов файла среди участников децентрализованной системы хранения данных](/resources/img/volume-1/1.2-history-of-decentralized-systems/1.1-file-fragment.png)

Стремительное развитие децентрализованных приложений началось с появлением сервисов и протоколов для кооперативного обмена файлами (рис. 1.3).

![Рисунок 1.3 – Схема обмена файлами в децентрализованных файлообменных системах](/resources/img/volume-1/1.2-history-of-decentralized-systems/1.2-file-sharing.png)

Один из первых сервисов, Napster, предоставлял возможность обмена MP3-файлами. В то время музыкальные композиции были доступны людям преимущественно в виде кассет и дисков (естественно, платно). Поэтому Napster стал очень популярным среди пользователей Интернета. И хотя пользователи взаимодействовали по принципу *peer-to-peer* (P2P), база данных с файлами последней версии все равно хранилась на централизованном сервере. Позже это и послужило слабым местом, давление на которое завершилось закрытием сервиса.

Далее появлялись другие файлообменные сети, такие как Gnutella, eDonkey2000, DC++ и I2HUB. Но многие из них в дальнейшем также оказались под ударом, поскольку у регулирующих органов была возможность повлиять на компанию, которая стояла за тем или иным сервисом. В 2005 году компания MetaMachine, которая разрабатывала и поддерживала eDonkey2000, получила специальное письмо от Американской ассоциации звукозаписывающей промышленности (RIAA) с требованием прекратить деятельность своей файлообменной сети. Деятельность, которая совершалась с помощью eDonkey2000, не могла считаться легальной, а компания могла понести серьезную ответственность, если не прекратит функционирование сервиса. 

Проект eDonkey2000 пришлось закрыть. Однако мир уже получил примеры, которые показывали, как можно изменить процессы функционирования существующих платформ. Реакцией на запрет и закрытие p2p-проектов стало появление новых проектов, которые развивали децентрализованные модели и создавали новые возможности для работы с данными (доступность, надежность хранения, отказоустойчивое функционирование и т. д.).

В 2001 году появился BitTorrent – протокол, который позволил работать быстро, эффективно и был не только отказоустойчивым, но и независимым. Изначально для работы требовалась централизованная клиентская программа, но позже появились трудно отслеживаемые torrent-клиенты, а использование VPN (Virtual Private Network) позволило повысить уровень анонимности пользователей. Именно BitTorrent – один из символов децентрализованного подхода, который успешно работает и по сей день.

Помимо BitTorrent, существуют и другие интересные решения для децентрализованного хранения данных. Одно из них – распределенное хранилище IPFS [11]. Суть функционирования IPFS, как и в BitTorrent, состоит в том, что пользователи не загружают файлы с централизованных серверов, а непосредственно обмениваются ими между собой. Идея IPFS довольна похожа на концепцию Всемирной паутины (World-Wide Web): каждому файлу в системе присваивается уникальный идентификатор – хэш-значение от него. Для отслеживания истории каждого файла используется Git (система управлениями версиями). Такой подход позволяет обеспечить доступ к наиболее актуальной версии контента и при этом гарантировать его подлинность. Поиск определенного файла возможен как по его идентификатору, так и по понятным для человека именам. Для этого используется децентрализованная система имен IPNS.

### Децентрализованные системы передачи данных

Чем больше людей вовлекалось в работу в глобальной сети, тем острее ощущалась необходимость в обеспечении приватности. В начале 2002 года был запущен проект под названием Tor (The Onion Router)  [6]. Это система прокси-серверов, позволяющих устанавливать анонимное сетевое соединение, защищенное от слежения за передачей данных (рис. 1.4). Реализация Tor позволила пользователям со всего мира обходить блокировки трафика местных провайдеров и получать доступ к данным, сохраняя при этом приватность [7].

Технологии, основанные на принципах децентрализации, получили весьма сильный толчок к развитию в отдельных сферах. Например, в 2004 году были запущены первые проекты по использованию беспроводных mesh-сетей в Южной Африке. Принцип их работы состоит в том, что пользователи сами поддерживают каналы передачи данных и выполняют маршрутизацию сетевых пакетов. В такой сети узлы «слушают» друг друга и, если определенный узел выходит из строя, те узлы, которые были подключены к вышедшему из строя узлу, ищут альтернативные узлы для переподключения. Такой способ организации сетевого взаимодействия [8] сделал Интернет более доступным в той местности, где централизованные провайдеры не стали размещать свое оборудование по разным причинам.

### Децентрализованные системы принятия решений

Другой интересный способ применения децентрализованного подхода – системы принятия решений. Представим, что пятеро человек положили в сейф торт и договорились, что съедят его, только если желающие будут составлять большинство. Они разделили секрет от кодового замка и распределили части секрета между собой. Теперь торт можно будет съесть, только если большинство участников договоренности решит поделиться своей частью секрета и открыть замок сейфа (рис. 1.5). 

![Рисунок 1.5 – Принятие решений независимыми участниками](/resources/img/volume-1/1.2-history-of-decentralized-systems/1.3-decision-making.png)

В наши дни очень крупные фирмы не могут управляться одним лицом, а если такие и существуют, то их эффективность находится под большим сомнением. Поэтому практически в любой крупной компании существует совет директоров и многочисленный штат советников, а иногда для принятия решений учитываются и голоса сотрудников компании. Такой подход повышает эффективность компании благодаря сотрудничеству людей с разными взглядами, с разными подходами к оценке конкретной проблемы и к ее решению. Таким образом, конечное решение можно считать более объективным.

По мере расширения связи руководства высшего уровня с управлением, которое находится на среднем и нижнем уровнях, производительность организации обычно увеличивается. В наши дни все больше организаций переходят от иерархического способа управления к более децентрализованному, что в свою очередь уже принесло свои плоды и продолжает их приносить.

Также важно не путать децентрализованные системы и системы с параллельными вычислениями. В обеих системах есть множество вычислительных машин объединенных в одну сеть. Но в первом случае вычислительная задача решается каждым компьютером заново для достижения независимости результатов вычислений, а во втором случае задача разбивается на подзадачи и каждый компьютер решает свою часть для сокращения времени получения результатов.

*Системы параллельных вычислений* (*grid systems*) – это системы, которые используют распределенные компьютерные ресурсы для достижения общей цели (рис. 1.6). Количество узлов в такой системе может колебаться от нескольких машин до сотен и тысяч рабочих станций.

![Рисунок 1.6 – Схема передачи результатов вычислений в параллельных вычислительных система](/resources/img/volume-1/1.2-history-of-decentralized-systems/1.4-distributed-calculation.png)

Такой подход впервые был предложен в 1999 году в публикации «The Grid: Blueprint for a new computing infrastructure» [9]. В том же году был запущен первый проект, в котором реализован данный подход, под названием SETI@home [10]. Сегодня существует множество реализаций таких проектов: BOINC, Folding@home, Einstein@Home и т. д. Отметим, что вышеупомянутый проект SETI@home – до сих пор один из самых мощных распределенных суперкомпьютеров.

### Децентрализованные платежные системы

Следующим шагом стала децентрализация платежных систем. Их было намного сложнее децентрализовать по вполне понятной причине – чувствительности людей ко всему, что напрямую связано с сохранностью (safety) их денег.

Благодаря изобретению *денег* стоимость частной собственности стало гораздо проще оценивать (возможность объективной оценки стоимости – одно из основополагающих свойств денег). Деньги были исторически привязаны к товарам, таким как золото, коровы, меха, ракушки, сигареты и т. д. Уровень благосостояния человека основывался на том, какое количество товара ему принадлежало.

В наши дни деньги приняли цифровой облик; они фактически стали числами в базе данных, позволяющими оценивать возможности, власть и статус людей относительно друг друга. Проблема с такими (т. н. *фиатными*) деньгами заключается в непрозрачности их эмиссии: этот процесс может совершаться согласно решениям отдельных людей, а не общему согласию. Отметим, что сама задача достижения общего согласия относительно монетарной политики вовсе не тривиальная.

С появлением Bitcoin (учетной системы) в 2009 году биткоин (базовая валюта) стал первым *дефицитным цифровым активом*. Вследствие этого стала популярной идея отделить деньги от государства или банков. Подобное произошло в некоторых развитых странах столетия назад, когда религия и пресса стали существовать независимо (почти…) от государства. Тем не менее, понятие *единой национальной валюты* до сих пор предусмотрено в конституциях большинства государств.

Главный вопрос таков: возможно ли создать эффективную платежную систему с изначально неограниченной эмиссией, способную моделировать работу фиатных денег, но при этом лишенную влияния отдельных людей? Наверняка можно сказать, что возможность создания цифрового дефицита (математически ограниченной эмиссии) и программируемых правил работы (конституции, которую гарантирует криптография) революционна для многих аспектов жизни и будет продолжать развиваться. По этой причине понимание принципов работы Bitcoin необходимо, чтобы успешно адаптироваться к реалиям нового цифрового мира.

Именно на примере Bitcoin в первой части книги мы разбираем особенности работы *децентрализованной учетной системы*, поскольку многие принципы, согласно которым он спроектирован и реализован, основополагающие для любой децентрализованной системы.

## 1.3 Применение принципов децентрализации

В этом подразделе конкретизируются и формализуются *принципы децентрализации* и особенности их применения в информационных системах. Например, они уже успешно применяются в системах хранения данных (IPFS), вычислительных системах для распределения нагрузки (BOINC project), mesh-сетях (Open Garden), телекоммуникациях (Tor, I2P), мессенджерах (Tox, BitMessage), сетях распространения контента (BitTorrent), а также в цифровых валютах.

### Ограничения и проблемы централизованных систем

В основу централизованных систем заложено централизованное управление процессами. В некоторых случаях подобный подход может обеспечить большую эффективность функционирования системы. В качестве яркого примера можно привести возможность простого и быстрого обновления правил протокола. Предположим, в централизованной учетной системе обнаруживается уязвимость, а разработчики быстро выясняют причину проблемы и выпускают соответствующее обновление. В результате, все пользователи, которые хотят дальше взаимодействовать с учетной системой, вынуждены обновить свое ПО. Процесс обновления в этом случае происходит быстро и максимально безболезненно.

> **Функционирование традиционных платежных систем**
> * *База данных хранится на главном сервере (облаке или кластере)*
> * *Система управляется централизованно* 
> * *Пользователи отправляют запросы в систему для проведения транзакций*

Однако имеют место риски, которые необходимо учитывать при работе в такой системе. Один из них – возможность полного отказа системы. При возникновении определенных ситуаций (выключение основного источника питания, халатность сотрудников при эксплуатации и т. д.) ключевые компоненты системы могут отказать и привести к полной потере ее работоспособности. Наличие систем резервирования несколько смягчает ситуацию, однако гарантировать бесперебойную работу сервиса может не всегда.

Безопасность является ключевым компонентом каждой системы. И независимо от мер, которые были приняты для обеспечения безопасности, централизованные сервисы все еще являются более уязвимыми; в то время как децентрализованные системы, ключевые узлы которых разнесены физически и имеют различное ПО, обеспечивают большую защиту как от вирусов, так и от непосредственных атак, точкой приложения которых зачастую является один узел.

Традиционные финансовые инструменты работают по принципу, согласно которому внутреннюю учетную систему нужно защищать с помощью грубой силы [12]. Подразумевается, что центральный сервер, на котором находится база данных, защищен только по периметру.

Можно привести пример из истории, когда люди строили крепости, которые обеспечивали достаточно хорошую защиту от стрел, но с появлением пороховых зарядов и развитием артиллерии крепости утратили свою неприступность и стали легкой мишенью. Достаточно было разрушить стену, и жители оказывались уязвимыми.

В условиях учетной системы в таком подходе кроются свои недостатки. С одной стороны, если атакующий эту защиту преодолеет, то он может получить полный доступ к данным и возможность их модифицировать. С другой стороны, пользователь не может лично проверять данные. Он может только отправить запрос на сервер, который обработает этот запрос и после пришлет ответ (рис. 1.5).

![Рисунок 1.5 – Принципы защиты традиционных систем](/resources/img/volume-1/1.3-applying-the-principles-of-decentralization/1.5-traditional-protection.png)

Для обычного пользователя внутренняя структура такой системы учета непрозрачная и нет никаких гарантий ее правильной работы, зато в случае сбоя или отказа в обслуживании есть человек, который несет ответственность. Кроме того, централизованная учетная система имеет единую точку отказа (рис. 1.5).

Если необходимо произвести проверку учетной системы, придется делать это вручную или использовать некоторые инструменты автоматизации, причем разрешение на такую проверку будет только у специально назначенного аудитора. До 2009 года так работали все учетные системы.

Потенциальная возможность цензурирования действий пользователя в системе также является недостатком. Централизованная система подразумевает полное и безоговорочное доверие пользователя к владельцу и руководителям системы. Такой подход содержит в себе угрозу, что правила протокола взаимодействия в системе могут быть нарушены, если владельцу системы это будет выгодно.

### Применение децентрализованного подхода

Исторически люди строили системы, копирующие привычную модель социальных отношений. Поэтому большинство систем, которые мы видим вокруг, построены по принципу иерархии. Существует немало сфер, где иерархическая модель хорошо работает, но, как было отмечено выше, такой подход потенциально связан с рядом рисков.

> **Проблемы, решение которых предлагает децентрализация** 
>> * *Возможность цензуры*
>> * *Наличие единственной точки отказа*
>> * *Необходимость доверять владельцу системы*

> **_Замечание._** *Цензура в контексте учетной системы означает, что конкретная сторона (например организация, которая обслуживает систему) может выполнять действия, такие как блокировка учетных записей пользователей и изменение данных транзакций, по своему усмотрению*

В целом, децентрализация возможна, когда идет речь о взаимодействии равноправных сторон. В течение последних двадцати лет были реализованы системы с равноправными взаимоотношениями (peer-to-peer) между участниками. Появилась возможность осуществлять ряд процессов децентрализовано, сохраняя достаточный уровень автоматизации. Тем не менее, задача децентрализации почти всегда очень сложная и не имеет тривиального решения, не говоря уже о готовых стандартных решениях.

### Принципы построения децентрализованных систем

Далее будут перечислены основные аспекты децентрализации, которые связаны с новыми технологическими и организационными рисками. Это поможет намного лучше прочувствовать особенности и сложности на пути проектирования, разработки и использования децентрализованных систем.

> **Базовые принципы децентрализации**
>> * *Максимальное увеличение уровня независимости каждого компонента системы*
>> * *Сохранение баланса между эффективностью работы и примененными средствами*
>> * *Децентрализация возможна при условии сохранения целостности всей системы [13]*

> **_Замечание._** *Мы будем использовать термин «данные», когда речь идет о последовательности байт, которая поддается передаче, хранению и обработке автоматизированными системами, а термин «информация» – когда подразумеваются некоторые знания или сведения, которыми обмениваются или которые запоминают люди.*

Прежде чем продолжить, следует упомянуть о способах взаимодействия пользователей с системой. На рис. 1.6 изображены три подхода [14], которые принципиально отличаются друг от друга по своему устройству.

![Рисунок 1.6 – Виды систем в зависимости от способа взаимодействия пользователей между собой](/resources/img/volume-1/1.3-applying-the-principles-of-decentralization/1.6-three-types-of-the-system.png)

> **_Замечание._** *Здесь и далее (на рисунках и по ходу текста) будут часто употребляться устойчивые выражения и термины в оригинале (на английском языке), чтобы свести к минимуму разночтения.*

К централизованным системам можно отнести популярные социальные сети. Их главный недостаток заключается в том, что нарушение работы их базы данных затронет всех пользователей.

К децентрализованным системам – банковскую систему в целом, поскольку ее образуют множество локальных центров, и неполадки, например, в банке Аргентины, не приведут к задержкам платежей в банках Германии.

К распределенным системам можно отнести mesh-сети и систему связи на основе карманных раций, где система поддерживается только пользовательскими устройствами, а отключение одного из устройств не окажет влияния на остальных пользователей.

> **_Замечание._** *Для обозначения систем второго и третьего типов мы будем употреблять общий термин – децентрализованная система, поскольку оба случая подразумевают отсутствие центрального узла.*

*Учетная система* – это частный случай автоматизированной системы обработки данных, который предусматривает наличие некоторой базы данных и необходимости принятия решений по поводу ее обновления (рис. 1.7).

*Централизованная учетная система* включает базу данных, механизмы ее обновления и управляющий центр, ответственный за поддержание ее работы. Управляющий центр не всегда может обеспечить достаточный уровень безопасности обработки данных и надежности принятия решений. В поисках лучших решений мир пришел к идее децентрализации учетных систем.

![Рисунок 1.7 – Архитектура учетной системы](/resources/img/volume-1/1.3-applying-the-principles-of-decentralization/1.7-accounting-system-architecture.png)

> **_Замечание._** *Здесь и далее мы будем обозначать транзакции как tx.*

### Типовая архитектура децентрализованных систем

*Децентрализованная учетная система* – это частный случай *учетной системы*, принципиальное отличие которой – использование *механизма достижения консенсуса* (согласия) между несколькими независимыми сторонами по поводу того каким образам обрабатывать общую базу данных (рис. 1.8). Следовательно, каждая сторона строит собственную базу данных, а алгоритм достижения консенсуса гарантирует, что каждая построенная база данных идентична остальным копиям. В согласовании конечного состояния всех копий принимают участие множество независимых сторон (валидаторов), а не одна уполномоченная сторона (центр).

![Рисунок 1.8 – Архитектура децентрализованной учетной системы](/resources/img/volume-1/1.3-applying-the-principles-of-decentralization/1.8-dec-acc-system-architecture.png)

### Преимущества децентрализованных систем

В общем случае децентрализованная система предполагает, что участники обмениваются информацией напрямую, используя p2p-протоколы, и самостоятельно хранят данные, которые им требуются. Для этого они запускают специальное ПО, которое поддерживает требуемый p2p-протокол конкретной децентрализованной системы. В децентрализованных системах учета финансов, таких как криптовалюты, предполагается, что все участники хранят копии одной и той же базы данных и обновляют их совместно, используя алгоритмы достижения консенсуса.

> * *Отказоустойчивость* 
> * *Независимость от единоличного контроля* 
> * *Trustless (отсутствует необходимость в доверии третьей стороне)*
> * *Permissionless (свободное использование)*
> * *Persistence (неизменность конечного состояния баз данных)*
> * *Liveness (гарантируемое добавление записей)*
> * *Формальность протоколов* 

Начнем с *отказоустойчивости* – свойства, при котором система сохраняет свою работоспособность даже после отказа одного или нескольких ее компонентов. В традиционной клиент-серверной архитектуре основные усилия направляются на защиту центрального сервера. Если атакующий завладеет сервером и получит доступ к базе данных, то он сможет переписать историю, как ему вздумается. В то же время атакующий не может нанести критический вред децентрализованной системе, завладев одним сервером и получив доступ к базе данных.

Принципы децентрализации много лет успешно применяются в проектировании и построении авиационной и космической техники, а также в работе высокоточных вычислительных системах. Очень важно, чтобы при работе в нестабильных условиях основные системы (навигации, связи, управления и т. д.) функционировали надежно. В таких случаях проектировщики системы прибегают к *избыточности*.

*Независимость от единоличного контроля* – еще одна отличительная черта децентрализованной системы. При наличии большого количества независимых участников никто, даже сильно заинтересованная сторона, не может повлиять на принятие решения в свою пользу.

Свойство *trustless* подразумевает отсутствие необходимости доверять системе в отношении хранения и обработки некоторых данных или выполнения некоторых процессов. Обычно оно достигается благодаря большому количеству независимых участников, которые принимают некоторые совместные решения. Очевидно, что с увеличением количества независимых (незнакомых) участников значительно снижается вероятность их сговора.

Свойство *permissionless* означает, что система доступна для работы без каких-либо дополнительных разрешений (отсутствует иерархия предопределенных ролей). Любой желающий может производить чтение и запись данных, осуществлять их аудит, а также участвовать в принятии совместного решения, то есть в управленческом процессе. Однако в ряде случаев, когда речь идет о решениях, которые должны приниматься экспертами, общедоступное участие и даже открытость базы данных учетной системы уже не являются преимуществами. Также свойство permissionless будет недостатком, когда валидаторы обрабатывают конфиденциальные данные.

Свойство *persistence* подразумевает, что система сохраняет неизменность конечного состояния своей базы данных, даже если она полностью прекращает свою работу на некоторое время.

Свойство *liveness* гарантирует, что если все честные участники хотят добавить запись в общую базу данных, то она наверняка будет туда добавлена.

*Формальность протоколов* подразумевает, что все участники придут к единому решению, если каждый из них строго следует предусмотренному алгоритму.

> **_Замечание._** *Преимущества децентрализованных систем зависят от их уровня децентрализации.*

### Ограничения децентрализованных систем

Наряду с явными преимуществами децентрализованные системы обладают некоторыми ограничениями.

Первое из них заключается в отсутствии службы поддержки (по определению), которая способна повлиять на состояния аккаунтов пользователей или транзакций. Это значит, что если вы случайно отправили транзакцию и она была добавлена в общую базу данных, то вам будет не к кому обратиться за возмещением, оправдывая это тем, что транзакция была случайной.

Второе ограничение – повышенная стоимость поддержания системы. Суммарные затраты на поддержание децентрализованной системы обычно больше, чем суммарные затраты на поддержание централизованного аналога этой системы. В ряде систем с течением времени база данных только растет в размере, а значит, их участники должны расходовать все больше ресурсов на хранение и обработку данных.

Третье ограничение – сложность реализации на децентрализованных платформах некоторых функций, которые доступны централизованным системам. В качестве примера можно привести подсчет статистики или оценку состояния системы в конкретный момент времени.

### Факторы, замедляющие внедрение децентрализованных систем

С увеличением уровня децентрализации растет надежность и устойчивость системы, однако увеличивать этот уровень не всегда просто. В процессе децентрализации могут встречаться некоторые сложности и ограничения.

> * *Сложности обновления протокола* 
> * *Проблема ответственности* 
> * *Сложный процесс монетизации разработки* 
> * *Избыточность и высокие требования к оборудованию* 
> * *Проблема масштабируемости*

*Сложности обновления протокола*. Сложность внедрения любого обновления протокола взаимодействия в децентрализованной среде заключается в том, что предложенное обновление должно поддержать большинство активных узлов сети (рис. 1.9). Для этого стороне, которая предлагает обновление, необходимо доказать необходимость его внедрения остальным узлам системы, что само по себе является очень сложной задачей. Одним из примеров может служить переход с IPv4 на IPv6, который требует больше времени, чем планировали разработчики. Связано это с необходимостью обновления во всех устройствах всех производителей. При этом выгода для пользователей заметна далеко не сразу.

![Рисунок 1.9 – Проблема обновления протокола](/resources/img/volume-1/1.3-applying-the-principles-of-decentralization/1.9-houses.png)

*Проблема ответственности.* Любое решение в децентрализованной системе – результат согласия большинства участников (выбранных определенным образом), поэтому не существует единственной стороны, которая могла бы отменить решение, принятое совместно, или навязать свое. Но если пользователь по собственной невнимательности все-таки станет жертвой мошенников, то ему некуда будет жаловаться, поскольку в общем случае нет ответственной стороны и каких-либо гарантий (рис. 1.10). Здесь речь идет именно о принятии рисков со стороны самих пользователей. А расчет этих самых рисков – довольно сложный процесс.

![Рисунок 1.10 – Проблема ответственности](/resources/img/volume-1/1.3-applying-the-principles-of-decentralization/1.10-responsibility.png)

*Сложный процесс монетизации разработки*. Монетизировать централизованную систему обычно легче, чем децентрализованную. Ведь централизованная система более управляемая и может иметь юридическую поддержку: существует назначенный представитель, ответственный за ведение деятельности в пределах правового поля. В таких условиях проще построить бизнес-модель и монетизировать проект. В децентрализованной системе, наоборот, достаточно сложно обеспечить защиту авторского права и контролировать использование сервиса. Поэтому разработчикам протоколов децентрализованных систем сложно извлекать прибыль из своих проектов.

*Проблема масштабируемости*. В случае использования механизма распределенного принятия решений требуется, чтобы все участники обменялись новыми данными и согласовали, какие из них считать правильными. Пропускная способность учетной системы уменьшается с увеличением количества валидаторов (рис. 1.11).

![Рисунок 1.11.1 – Пример снижения пропускной способности системы, связанного с увеличением количества ее пользователей](/resources/img/volume-1/1.3-applying-the-principles-of-decentralization/1.11.1-scalability.png)
![Рисунок 1.11 – Пример снижения пропускной способности системы, связанного с увеличением количества ее пользователей](/resources/img/volume-1/1.3-applying-the-principles-of-decentralization/1.11-scalability.png)

Децентрализованным системам также приходится *хранить избыточный объем данных и удовлетворять высоким требованиям к оборудованию*. Детальнее эти ограничения будут рассмотрены далее (см. 5.3).

Существуют и *другие факторы*, которые могут препятствовать распространению ПО, предназначенного для работы в децентрализованной среде. Например, сетевой трафик легко поддается фильтрации со стороны интернет-провайдера. Значительная часть ПО распространяется через централизованные сервисы, такие как GitHub, Apple Store, Google Play и т. д.; как известно, такие сервисы способны осуществлять субъективную цензуру (рис. 1.12). Приложения могут ее не пройти или же могут быть удалены (причем даже намного позже успешной публикации).

![Рисунок 1.12 – Сервисы-поставщики, способные цензурировать ПО для работы в децентрализованных системах](/resources/img/volume-1/1.3-applying-the-principles-of-decentralization/1.12-centralized-access.png)

### Итоги

Далеко не всегда сравнивать децентрализацию и централизацию – хорошая идея, поскольку все зависит от назначения, требований и условий эксплуатации.

Централизованная система обладает рядом полезных свойств. Управлять такой системой легче, и обычно известно, кто несет ответственность за ее работу. Решения принимаются быстро. Можно построить вполне конкретную бизнес-модель и придерживаться ее, что является преимуществом, когда речь идет о монетизации.

Основная цель децентрализации – обеспечить для системы свойства, позволяющие эффективно и надежно взаимодействовать ее пользователям друг с другом в ситуации, когда они не доверяют какому-либо центральному органу или посреднику. Криптографические алгоритмы, протоколы совместного принятия решений и технология блокчейн образовали фундамент, на котором можно построить действительно защищенную, прозрачную и достаточно эффективную децентрализованную учетную систему.

**Распространенные мифы**

*Объем ресурсов, необходимый для обслуживания децентрализованной системы, с течением времени постоянно увеличивается.*

Необходимый объем ресурсов увеличивается, только если децентрализованная система должна сохранять возможность осуществить аудит всей истории изменений совместной базы данных. В таком случае однозначно повышаться будут только требования к дисковому пространству, а требования к вычислительной мощности могут оставаться прежними.

[ИСТОРИЯ И ПРИНЦИПЫ РАБОТЫ BITCOIN](https://github.com/distributed-lab/blockchain-and-decentralized-systems-book/blob/main/chapters/volume-1/ru/2-history-and-operational-principles-of-bitcoin.md)